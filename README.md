# PersonalFinCodeBot
Бот для Telegram который возвращает персональный финансовый код и антикод.

## Требования для работы бота
PHP версия 8.2 и выше.  
Для Windows нужен Docker Desktop и утилита make (choco install make).  
Для Unix нужен docker и make (но обычно это уже есть в дистрибутиве).  
Виртуальный сервер или хостниг или что-то с постоянным доступом к internet.

## Как запустить бот
- Получаем токен бота
- Вписываем полученный код в файле handler.php
- Собираем папку vendor
- Загружаем данные на хостинг или сервер
- Производим запуск обработчика

### Получаем токен бота
Заходим в телеграм, переходим на вкладку боты, ищем бот @BotFather, запрашиваем у него токен.

### Вписываем полученный код в файле handler.php
Открываем файл handler.php и вместо фразы ENTER_THE_TOKEN_CODE_HERE вписываем полученный код.

### Собираем папку vendor
Для сборки папки vendor подготовлен docker контейнер с нужной версией PHP и файлом composer.  
Достаточно запустить make init и затем make composer, тогда в корне проекта появится папка vendor.  

### Загружаем данные на хостинг или сервер
На сервер или хостинг с версией PHP 8.2 и выше, в любую папку загружаем папку vendor, папку src и файл handler.php.

### Производим запуск обработчика
Теперь с помощью утилиты cron нужно запустить на выполнение файл handler.php с помощью интерпретатора php. На хостингах обычно для этого есть специальный раздел. Можно на ежедневный запуск. Суть этого действия следующая: 
```shell
php /path_to_handler/handler.php  #ежедневно
```
Можно запустить это действие через shell консоль, но тогда при закрытии консоли обработчик перестанет выполняться и бот перестанет работать, по этому через cron. 

## Дополнительно
На всякий случай закроем с помощью файла .htaccess доступ через web. Но это не является полноценной защитой, лучше всего расположить скрип в папке, которая не доступна для просмотра из внешних источников. Скрипт всё равно будет работать. Ему нужен только доступ в интернет.  
**Не используйте ботов, которым вы не доверяете для подключения к своим каналам в телеграм!**  

Этот бот в настоящее время работает, можно проверить:   [@PersonalFinCodeBot](https://t.me/PersonalFinCodeBot)